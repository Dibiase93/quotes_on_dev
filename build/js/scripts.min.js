!function(t){t(function(){let e="";t("#new-quote-button").on("click",function(o){o.preventDefault(),e=document.URL,t.ajax({method:"get",url:api_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).done(function(e){const o=e[0];history.pushState(null,null,o.slug);const n=o.excerpt.rendered,s=o.title.rendered,a=o._qod_quote_source,u=o._qod_quote_source_url,r=`<div class="entry-content">\n          ${n}\n          </div>\n          <div class="entry-meta">\n          <h2 class="entry-title">&mdash; ${s}\n          </h2>`;a&&u?t(".post").html(r+`<span class="source">, <a href="${u}"> ${a}</a>\n              </span></div>`):a?t(".post").html(r+`<span class="source">, ${a}\n                </span></div>`):t(".post").html(r+'<span class="source">\n                </span></div>')}).fail(function(){t(".post").html('<p class=".entry-meta"> Failed to load quote, please try again</p>')}),t(window).on("popstate",function(t){window.location.reload(e)})}),t("#quote-submission-form").on("submit",function(e){e.preventDefault();const o=t("#quote-author").val(),n=t("#quote-content").val(),s=t("#quote-source").val(),a=t("#quote-source-url").val();""!==o&&""!==n?t.ajax({method:"post",url:api_vars.rest_url+"wp/v2/posts",data:{title:o,content:n,post_status:"pending",_qod_quote_source:s,_qod_source_url:a},beforeSend:function(t){t.setRequestHeader("X-WP-Nonce",api_vars.wpapi_nonce)}}).done(function(){t(".entry-title").append("<p>&mdash; Your quote has been submitted</p>"),t("#quote-submission-form").slideUp(500)}).fail(function(){t(".entry-title").append("<p>&mdash; Quote not submitted, please try again</p>")}):""!==n?alert("please add author"):""!==o?alert("please add quote"):alert("please add quote & author")})})}(jQuery);